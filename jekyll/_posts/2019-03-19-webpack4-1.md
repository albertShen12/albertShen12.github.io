---
layout: post
title:  "webpack4学习（第一篇：基础）"
date:   2019-03-19 12:50:01 +0800
categories: js
tag: webpack
---

* content
{:toc}


webpack4学习				{#albert}
------------------------

webpack是前端构建项目最常用的工具，目前的前端项目除了angular之外，基本都是由webpack，或二次封装webpack的构建工具进行构建。

#### 目录：
1. webpack4学习（第一篇：基础）
2. [webpack4学习（第二篇：dev模式与热更新）](https://albertshen12.github.io/2019/03/19/webpack4-2/)
3. [webpack4学习（第三篇：静态文件）](https://albertshen12.github.io/2019/03/19/webpack4-3/)
4. [webpack4学习（第四篇：常用插件）](https://albertshen12.github.io/2019/03/19/webpack4-4/)

#### 正文：

webpack的基础功能，在于将项目化的前端代码，打包成可运行的文件。在这个过程中，涉及了一些功能点：
1. 获取文件中依赖的其他文件打包到文件中（bundle）。
2. 对各个类型的文件进行预处理（loader）。js文件需要将es6转化为原生js，scss/less文件需要编译成css等等
3. 对各个类型的文件进行优化（loader）。例如去除js中冗余的代码，对css中的样式拓展浏览器支持，压缩文件大小
4. 将项目文件进行拆分（chunk）。优化加载速度。例如分离公共库和业务代码，以及按路由懒加载。
5. 通过某些插件简化一些其他的前端开发工作（plugin）。例如常见的webpack-html—plugin
6. 以开发模式运行项目代码（devServer）。
除此之外，还有一些其他的功能。例如代码分析，服务器渲染等。

基本参数：
1.entry：入口文件。单页面项目的话，多是src目录的下的main.js,index.js。




#### 动手尝试：

1. 准备一个空白项目(需node，npm环境)
    - 创建目录:       mkdir webpack4-react-demo & cd webpack4-react-demo
    - 初始化package.json:    npm init  
    - 添加对应的webpack模块到项目中  
        npm i --save-dev webpack@4.19.1 webpack-cli@2 webpack-dev-server@3  
        npm i --save-dev babel-core@6 babel-loader@7 babel-preset-env babel-preset-react@6  
        npm i --save-dev html-loader html-webpack-plugin@3  
        npm i --save react@16 react-dom@16  
    - 新建index.html文件,内容:  
        `<!DOCTYPE html>`  
        `<html lang="en">`  
        `<head>`  
            `<meta charset="utf-8">`  
            `<title>React</title>`  
        `</head>`  
        `<body>`
        `<div id="app">`  
        `</div>`  
        `</body>`  
        `</html>`  
    - 新建.babelrc文件,内容:  
        `{`  
            `"presets": ["env", "react"]`  
        `}`      
    - 创建src目录，并新建App.js,内容：  
   
      `import React from "react";`

        `const App = () => {`  
        `return (`  
            `<div>`  
                `<p>hello world!</p>`  
            `</div>`  
        `);`  
        `};`  
        `export default App;`    

    - src目录下，继续新建index.js,内容：
    
        `import App from "./App";`  
        `import React from "react";`  
        `import ReactDOM from "react-dom";`  
        `ReactDOM.render(<App/>, document.getElementById("app"));`  
        
    - 创建build目录,并新建webpack.config.js文件,内容:
        `const HtmlWebPackPlugin = require("html-webpack-plugin");`  
        `const path = require('path');`  
        
        `module.exports = {`  
            `entry: './src/index.js',    // 入口`  
            `context: path.resolve(__dirname,'../'),`  
            `module: {`  
                `rules: [`  
                    `{`  
                        `test: /\.js$/,`  
                        `exclude: /node_modules/,`  
                        `use: {`  
                            `loader: "babel-loader"`  
                        `}`  
                    `},`  
                    `{`  
                        `test: /\.html$/,`  
                        `use: [`  
                            `{`  
                                `loader: "html-loader",`  
                                `options: {minimize: true}`  
                            `}`  
                        `]`  
                    `}`  
                `]`  
            `},`  
            `plugins: [`  
                `new HtmlWebPackPlugin({`  
                    `template: "./index.html",`  
                    `filename: "./index.html"`  
                `})`  
            `]`  
        `};`  
    - package.json添加script指令:
        `"dev": "webpack-dev-server --config build/webpack.config.js --mode development --open"`
        `"build": "webpack --config build/webpack.config.js --mode production"`    
